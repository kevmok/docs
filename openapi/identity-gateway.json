{"openapi":"3.0.0","info":{"description":"Any customer looking forward to build, manage and host their own identity source can accomplish it by hosting an identity gateway that implements Moveworks API specification for identity sources provided below. This will enable them to have greater control and flexibility over what attributes they are able to federate into Moveworks User objects.\n\nFor ingestion, Moveworks exclusively includes active users and does not process inactive users. In simple words mark a user as active(state: ACTIVE) if they are to be ingested otherwise mark them as inactive(state: INACTIVE)\n\nBy default, the full sync method is used for ingestion. However, if a customer prefers the incremental sync approach for its advantages, they must opt for soft deletion. This means that user records are marked as inactive instead of being completely removed from the database when deleted. In cases where hard deletion occurs in the database, the default approach reverts to full sync. Additionally, to support incremental sync, the identity gateway must maintain a \"last_updated_at\" attribute for each user and update it whenever the user is modified.\n\nWe will share more information on how to convey your deletion approach(soft or hard deletion) to us once we start supporting incremental sync.\n","version":"1.0.0","title":"Identity Gateway","contact":{"email":"moveworks-gateway@moveworks.ai"}},"servers":[{"url":"http://localhost:5000/myinstance1"}],"paths":{"/users":{"get":{"summary":"List Users","description":"List of users should be returned from this API in a deterministic order. Deterministic order is desired if we decide to use pagination.\nAnticipated load – Moveworks will call this endpoint to ingest users, polling would be as frequent as every 4 hours, could be even more aggressive in extenuating circumstances and it could be as seldom as 2 weeks. We recommend a rate limit of 10 req/sec for this endpoint.","operationId":"listUsers","parameters":[{"name":"pageToken","in":"query","description":"Used to paginate query results, determining starting point for the next page of records retrieval. When a query operation returns a large number of results surpassing the specified page size, the gateway is expected to restrict the response size to the provided page size. It should automatically include a \"next_page_token\" field in the response. To obtain the subsequent page of results, the client will employ the \"pageToken\" and set it to the value of the \"next_page_token\" in the following request. This approach facilitates the efficient retrieval of large result sets through multiple paginated requests. Since this parameter value becomes available starting from the second call, it will be omitted during the initial call to retrieve records.\n    \nWhen combining the filter parameter with the pageToken parameter, servers must ensure that the client uses the appropriate pageToken value for the specified filter string. Failure to do so should result in the server throwing an \"INPUT_VALIDATION_FAILED\".","schema":{"type":"string"}},{"name":"pageSize","in":"query","description":"Maximum number of users to return in a single query. Defaults to 1000.\n\nNote: Server is free to return less number of users.\n","schema":{"type":"integer","format":"int64"}},{"name":"filter","in":"query","description":"Defines a filter expression that narrows down the returned set of items. It allows you to specify criteria, such as numeric comparisons or string matching, to filter the items based on the values of their properties.\n\nThe filter parameter must include at least one valid Boolean expression. Each expression should consist of an attribute name, followed by an attribute operator and a value. You have the flexibility to combine multiple expressions using logical operators, and you can also group expressions together using parentheses “()”.\n\nHere are the available attribute operators and their descriptions:\n\n- **`eq`** (equal): The attribute and operator values must be identical for a match.\n- **`ne`** (not equal): The attribute and operator values are not identical.\n- **`gt`** (greater than): If the attribute value is greater than the operator value, there is a match. The actual comparison depends on the attribute type.\n- **`lt`** (less than): If the attribute value is less than the operator value, there is a match. The actual comparison depends on the attribute type.\n\nThe boolean operators available for combining expressions are:\n\n- **`and`** (Logical AND): The filter is considered a match only if both expressions evaluate to true.\n- **`or`** (Logical OR): The filter is considered a match if either of the expressions evaluates to true.\n\nParentheses **`()`** can be used to group boolean expressions and alter the standard order of operations. By grouping expressions with parentheses, you can control how the logical OR operation is evaluated and prioritize certain conditions over others. This allows for more flexibility and precision in constructing complex boolean expressions.\n\nAttribute names and attribute operators used in filters are case insensitive.  For example, the following two expressions will evaluate to the same logical value:\nfilter=user.state Eq \"ACTIVE\"\nfilter=user.STate eq \"ACTIVE\"\n\nThe evaluation of filters follows a standard order of operations. Attribute operators take precedence over other operators, followed by the grouping operator (parentheses), then the logical AND operator, and finally the logical OR operator.\n\nIf the requested filter operation is not recognised, providers must refuse to filter the results and return an HTTP 400 error with an appropriate human readable response.\n\n**Here are some examples of filter expressions:**\nIn the provided examples, we have utilised the suggested response structure as defined in the response section. However, it's important to note that these expressions may differ if you opt for an alternative response format or structure.\n\n- filter=last_modified_at gt \"2011-05-13T04:42:34Z\"\n- filter=user.state ne “INACTIVE” and last_modified_at gt \"2011-05-13T04:42:34Z\"\n","examples":{"Full-Sync":{"description":"During a full sync, Moveworks can retrieve only users in the active state, which restricts the returned results to the desired users for ingestion.\n","value":"user.state eq \"ACTIVE\"\n"},"Incremental-Sync":{"description":"During an incremental sync, the query parameter with the \"last_modified_at\" attribute is utilised to fetch records that have been modified since a specific timestamp.\n","value":"last_modified_at gt \"2022-10-20T17:28:52Z\"\n"},"Customer-Specific-Filter":{"description":"In some cases, a customer may have specific requirements for the data that is ingested into Moveworks. For example, they may only want to ingest users who belong to a particular cost center, identified by the cost_center_id attribute. To achieve this, the customer can request that Moveworks includes a filter expression with the value of 'A' for the cost_center_id attribute in every API call made by Moveworks. This will ensure that only users who belong to cost center 'A' are ingested into the Moveworks system.\n","value":"user.employment_info.cost_center_id eq \"A\"\n"}},"schema":{"type":"string"}}],"responses":{"200":{"description":"List of users\n","headers":{"X-RateLimit-Limit":{"schema":{"type":"integer"},"description":"The maximum number of requests you're permitted to make per minute."},"X-RateLimit-Remaining":{"schema":{"type":"integer"},"description":"The number of requests remaining in the current rate limit window."},"X-RateLimit-Reset":{"schema":{"type":"string","format":"date-time"},"description":"The remaining window before the rate limit FULLY resets in UTC epoch seconds."}},"content":{"application/json":{"schema":{"type":"object","required":["results"],"properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"next_page_token":{"type":"string","description":"The value provided serves as the starting point for fetching the next page of records. In the next call, use this value as the pageToken parameter.","example":"ABCD1234"}}}}}},"default":{"$ref":"#/components/responses/Error"}}}},"/users/{userId}":{"get":{"summary":"Get User By ID","description":"Returns user details given their userId. We recommend a rate limit of 5 req/sec for this endpoint.","operationId":"getUserById","parameters":[{"name":"userId","in":"path","description":"ID of user to fetch details for","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"A single user","headers":{"X-RateLimit-Limit":{"schema":{"type":"integer"},"description":"The maximum number of requests you're permitted to make per minute."},"X-RateLimit-Remaining":{"schema":{"type":"integer"},"description":"The number of requests remaining in the current rate limit window."},"X-RateLimit-Reset":{"schema":{"type":"string","format":"date-time"},"description":"The remaining window before the rate limit FULLY resets in UTC epoch seconds."}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"default":{"$ref":"#/components/responses/Error"}}}}},"components":{"responses":{"Error":{"description":"There was an error. Please see our error documentation for details on what the errors mean. https://docs.moveworks.ai/gateway/errors/","headers":{"X-RateLimit-Limit":{"schema":{"type":"integer"},"description":"The maximum number of requests you're permitted to make per minute."},"X-RateLimit-Remaining":{"schema":{"type":"integer"},"description":"The number of requests remaining in the current rate limit window."},"X-RateLimit-Reset":{"schema":{"type":"string","format":"date-time"},"description":"The remaining window before the rate limit FULLY resets in UTC epoch seconds."}},"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"schemas":{"User":{"type":"object","required":["user","system_identity","last_updated_at"],"properties":{"user":{"type":"object","required":["state","universal_identifier"],"properties":{"state":{"type":"string","description":"Specifies the state of the user","enum":["ACTIVE","INACTIVE"],"example":"ACTIVE"},"universal_identifier":{"type":"string","description":"Unique identifier of the user. This field should always be populated. It will be used to uniquely identify a user across different systems.","example":"john@example.com"},"email_addr":{"type":"string","description":"Email address of the user","format":"email","example":"john@example.com"},"first_name":{"type":"string","description":"First name of the user","example":"John"},"last_name":{"type":"string","description":"Last name of the user","example":"Doe"},"full_name":{"type":"string","description":"Full name of the user","example":"John Doe"},"work_status":{"type":"string","description":"Employement type of the user","enum":["UNKNOWN_WORK_STATUS","CONTINGENT","INTERN","FULL_TIME"],"example":"FULL_TIME"},"employment_info":{"type":"object","properties":{"employee_start_date_ts":{"type":"string","description":"Joining date of the employee in in ISO-8601 UTC.","format":"timestamp","example":"2023-05-14T09:30:00Z"},"role":{"type":"string","description":"Role of the user in the organisation","example":"Software Engineer"},"manager_email":{"type":"string","description":"Email address of the manager of the user","format":"email","example":"emilysmith@example.com"},"cost_center_id":{"type":"string","description":"Cost center id for the user","example":"A123"},"cost_center_name":{"type":"string","description":"Cost center name for the user","example":"Engineering Department"},"department":{"type":"string","description":"Specifies the department the user belongs to","example":"Engineering"},"office_phone_number":{"type":"string","description":"Specifies the office phone number of the user","example":"555-123-4567"},"assistant_full_name":{"type":"string","description":"Assistant's full name of the user","example":"Sarah Johnson"},"employment_location":{"type":"object","properties":{"location":{"type":"string","description":"Specifies the location of the office","example":"Austin, Texas"},"office":{"type":"string","description":"Denotes the name of the office","example":"MTV"},"country_code":{"type":"string","description":"Specifies the country code of the employee in E.164 format","example":1},"region":{"type":"string","description":"The geographical region to which the office is assigned","example":"South Central"},"timezone":{"type":"string","description":"Indicates the time zone in which the office is located","example":"Central Standard Time (CST)"}}}}}}},"system_identity":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Refers to the unique identifier assigned to the user in the identity gateway. This is usually primary key of the external system","example":"1234-5678-9012-3456"},"username":{"type":"string","description":"Refers to the username of the user in the identity system. This is usually lookup key of the external system","example":"JohnDoe"}}},"last_updated_at":{"type":"string","description":"Represents the timestamp indicating the most recent modification or update made to the user's information (in ISO-8601 UTC)","format":"timestamp","example":"2023-05-14T09:30:00Z"}}},"Error":{"type":"object","required":["code","message"],"properties":{"code":{"type":"string","description":"Description of the error type","enum":["INPUT_VALIDATION_FAILED","AUTHENTICATION_FAILED","NOT_FOUND","RATE_LIMIT_EXCEEDED","EXTERNAL_REST_ERROR","INTERNAL_SERVER_ERROR"]},"message":{"type":"string","description":"Details about the error issue."}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"security":[{"bearerAuth":[]}],"x-readme":{"explorer-enabled":true,"proxy-enabled":true}}